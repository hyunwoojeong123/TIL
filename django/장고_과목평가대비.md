# 장고 과목평가대비

- urls 분리

각 app의 url들을 메인 프로젝트 폴더의 `urls.py`에 다 적으면 혼동이 올 수 있다. 그래서 각 app 폴더에 urls.py 를 만들고, 메인 프로젝트 폴더에서 `path('articles/', include('articles.urls'))` 요런 식으로 해서 urls 를 분리한다.

- `app_name`

폼에서 `action = ` 지정하거나 redirect로 url쓸 때 별명을 써서 `articles:index` 요런 식으로 간편하게 할 수 있다. 이렇게 하기 위해선 각 app의 urls.py 에서 app_name을 지정해줘야 한다. app_name = 'articles' 이렇게

- static 다운 받아쓰기

왜 굳이 다운 받아 쓸까? CDN으로 파일을 관리하게 되면 의존성이 더 커진다. 만약 이 서버가 무너져서 못 쓰게 된다면, 내 프로그램도 영향이 크게 생긴다.

- image resizing

>  이미지를 적당한 크기로 잘라서 쓴다.

`pillow`, `pilkit`,`django-imagekit`를 미리 설치해야 한다.

설치 순서 : `pillow` -> `pilkit` -> `django-imagekit` 

- Cookie & Session

HTTP(HyperText Transfer Protocol) : HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜(규칙,약속), 웹에서 이루어지는 모든 데이터 교환의 기초

HTTP 특징 : 비연결지향 - 서버는 응답 후 접속을 끊음, 무상태(stateless) - 접속이 끊어지면 클라이언트와 서버간의 통신이 끝나며 상태를 저장하지 않음

1. Cookie(쿠키)

> 클라이언트 로컬에 파일로 저장

1) 클라이언트의 로컬에 저장되는 키-값의 작은 데이터 파일

2) 웹 페이지에 접속하면 요청한 웹 페이지를 받으며 쿠키를 로컬에 저장하고, 클라이언트가 재요청시에 웹페이지 요청과 함께 쿠키 값도 같이 전송

3) HTTP는 비연결지향이기 때문에 상태가 존재하지 않음. 그래서 쿠키에 정보를 저장한 뒤 나중에 정보를 다시 보내줌(상태를 만들어줌, 클라이언트와 서버가 연결이 돼 있는 것처럼 보이게 함!)

4) 사용예시 : 아이디 자동완성, 공지 하루 안보기, 팝업 체크, 비로그인 장바구니 담기 등, 편의를 위하되 지워지거나 유출 돼도 큰일은 없을 정보들을 저장

2. Session(세션)

>서버에 저장(이때 session id는 쿠키의 형태로 클라이언트 로컬에 저장)

1) 사이트와 특정 브라우저 사이의 상태를 유지시킴

2) 클라이언트가 서버에 접속하면 서버가 특정 session id를 발급하고 클라이언트는 session id를 쿠키를 사용해 저장

3) 클라이언트가 다시 서버에 접속할 때 해당 쿠키(session id가 저장된)를 이용해 서버에 session id를 전달

4) Django는 특정 session id를 포함하는 쿠키를 사용해서 각각의 브라우저와 사이트가 연결된 세션을 알아냄

5) 세션 정보는 django DB의 django_session 테이블에 저장(보안상 서버가 가지고 있음)

6) 주로 로그인 사태 유지에 사용



### (가장 중요) HTTP 쿠키는 상태가 있는 세션을 만들도록 해준다

크롬(클라이언트) , 장고(서버)

> 아래와 같은 구조 때문에 연결된 것처럼 보일 뿐 연결된 상태는 아님
>
> 쿠키가 지워지면 session_id가 지워지기 때문에 로그아웃이 됨!

1. 로그인(크롬->장고)
2. 로그인성공, session_id (세션정보) 만든 뒤, 발급(장고->크롬)
3. index/+쿠키(쿠키에 session_id 저장)(크롬->장고)
4. index.html + 로그인된 상태(장고->크롬)



