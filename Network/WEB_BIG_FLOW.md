# 웹 통신 흐름

인터넷 창에서 주소창에 주소를 입력하면,

### 브라우저

1. 주소(url) 값을 브라우저가 조사한다.
2. HTTP Request 메시지를 만든다.
3. 메시지를 직접 보내진 못하므로 OS에 보내달라고 한다.

* OS에 메시지를 보내달라 할 때 ip주소로 받을 상대를 정하는데, 이 때 DNS 서버를 조회해야 한다.



### 프로토콜 스택, LAN 어댑터

1. 프로토콜 스택(운영체제 내장 네트워크 제어용 SW)가 메시지를 받는다.
2. 메시지를 패킷에 저장
3. 거기에 주소 등 제어정보를 덧붙인다.
4. 패킷을 LAN 어댑터에 보낸다.
5. LAN 어댑터는 패킷을 전기신호로 바꾼다.
6. 신호를 LAN 케이블에 송출한다.

* 프로토콜 스택은 오류 발생시 제어 정보를 사용해 수정하거나 상황을 조절한다.



### 허브,스위치,라우터

1. 패킷은 스위칭 허브를 경유해 인터넷 접속용 라우터에 도착
2. 라우터는 패킷을 프로바이더(통신사)에 전달
3. 인터넷으로 들어간다.



### 액세스 회선, 프로바이더

1. 패킷은 인터넷의 입구에 있는 액세스 회선(통신 회선)에 의해 POP(Point of Presence, 통신사용 라우터) 까지 운반된다.
2. POP를 거쳐 인터넷의 핵심부로 들어간다.
3. 패킷이 목적지를 향해 간다.



### 방화벽, 캐시서버

1. 패킷이 웹 서버측의 LAN에 도착
2. 방화벽이 도착한 패킷을 검사
3. 패킷이 웹 서버까지 가야 되는지 아닌지를 판단하는 캐시서버가 있다.

> 캐시서버는 엑세스한 페이지의 데이터를 자신이 가지고 있으면 웹서버에 안 물어보고 바로 그 값을 읽을 수 있다. 페이지 데이터 중 재사용할 것이 있으면 캐시서버에 저장한다.



### 웹 서버

1. 패킷이 웹서버에 도착하면 웹 서버의 프로토콜 스택은 패킷에서 메시지를 꺼낸 다음 웹서버 애플리케이션에 넘긴다.
2. 웹서버 애플리케이션은 요청하는 데이터를 응답 메시지에 넣어 클라이언트로 보낸다.
3. 응답 메시지가 클라이언트에게 전달된다.