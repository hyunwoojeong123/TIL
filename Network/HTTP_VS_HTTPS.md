# HTTP와 HTTPS

### HTTP의 문제점

- 평문 통신이라 도청 가능
- 통신 상대 확인 안해서 위장 가능
- 완전성 증명할 수 없기 때문에 변조 가능

> TCP/IP 구조의 통신은 통신 경로상에서 엿볼 수가 있다. 그래서 암호화 해서 그걸 막아야 한다.

### 방어 방법

1. `SSL(Secure Socket Layer)` or `TLS(Transport Layer Security)` 프로토콜을 조합해 통신 내용을 암호화 한다. SSL을 조합한 애를 `HTTPS(HTTP Secure)`라고 부른다.
2. HTTP 메시지에 포함되는 콘텐츠를 암호화한다. 받을 때 암호를 풀어서 출력한다.



> HTTP는 상대가 누구인지 확인을 안한다. 그렇기 때문에 위장이 가능하다.

### 방어 방법

`SSL`로 상대를 확인할 수 있다. 증명서를 발급해 통신 상대가 내가 통신하고자 하는 상대인지 확인한다.



> HTTP는 보낸 내용이 수신측에서 받은 내용과 일치한다는 것을 보장할 수 없다. 따라서 공격자가 중간에 request, response를 가로채 변조하는 공격을 할 수 있다.

### 방어 방법

`MDS`, `SHA-1` 등의 해시 값을 확인하거나 파일의 디지털 서명을 확인한다. 근데 확실한 것은 아니다. 따라서 `HTTPS`를 사용해야 한다. 



## HTTPS

> HTTP에 SSL을 조합한 것, HTTP의 문제점 3가지를 보완한다.

기존 HTTP에서 통신하는 소켓 부분을 `SSL` or `TLS`라는 프로토콜로 대체한 것.

기존 HTTP는 TCP와 직접 통신, HTTPS는 HTTP와 SSL이 통신, SSL이 TCP와 통신.

SSL의 암호화,증명성, 안전성 보호를 이용할 수 있다.

암호화 방식으로는 공통키 암호화 방식과 공개키 암호화 방식을 혼합한 하이브리드 암호 시스템 사용

공통키를 공개키 암호화 방식으로 교환하고, 그 후에는 공통키 암호를 사용한다.

- 공통키 암호화(대칭 키 암호화) : 암호화에 사용되는 키와 복호화에 사용되는 키가 동일함. 연산 속도가 빠르다. 키 전달할 때 나쁜 사람이 뻈어가면 그대로 털림.
- 공개키 암호: 공통키 암호의 키 전달의 취약점을 보완하기 위해 탄생. 한 쌍의 키가 존재 - 특정 사람이 가지는 개인키(비밀키) 와 누구나 가질 수 있는 공개키 암호화,복호화에 사용되는 키가 서로 다름. 키 전달의 취약점을 해결한 대신 속도가 느리다.



## 여러 장점에도 불구하고 모든 웹페이지에서 HTTPS를 사용하지 않는 이유

암호화하는데 메모리,CPU등 자원이 많이 필요하다. 자원을 많이 먹으면 서버 한 개당 처리할 수 있는 request의 수가 줄어든다. 그래서 보안이 중요한 정보를 다룰 때만 HTTPS를 쓴다.